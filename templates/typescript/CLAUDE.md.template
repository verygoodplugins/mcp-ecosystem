# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Repository Purpose

This is **mcp-{name}** - an MCP (Model Context Protocol) server that {description}.

## Common Commands

```bash
# Development
npm run dev          # Start with hot reload
npm run build        # Compile TypeScript
npm start            # Run compiled server

# Testing
npm test             # Run tests
npm run test:watch   # Watch mode
npm run test:coverage # With coverage

# Code Quality
npm run lint         # ESLint
npm run format       # Prettier
```

## Architecture

```
mcp-{name}/
├── src/
│   ├── index.ts           # MCP server entry point
│   ├── types.ts           # TypeScript interfaces (create as needed)
│   └── {name}-client.ts   # API client wrapper (create as needed)
├── tests/                 # Test files
├── dist/                  # Compiled output (git-ignored)
├── package.json
├── tsconfig.json
└── server.json            # MCP Registry manifest
```

## Key Patterns

**MCP SDK Usage:**
- Server initialized with `@modelcontextprotocol/sdk`
- Tools registered via `setRequestHandler(ListToolsRequestSchema, ...)`
- Tool execution via `setRequestHandler(CallToolRequestSchema, ...)`

**Error Handling:**
- Return `{ content: [...], isError: true }` for tool errors
- Validate environment variables at startup
- Use typed error messages

**Testing:**
- Unit tests for API client methods
- Integration tests for tool handlers with mocked responses
- Smoke tests for server startup

## Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `API_KEY` | Yes | API key for the service |

## VGP Standards

This server follows [VGP MCP Standards](https://github.com/verygoodplugins/mcp-ecosystem/blob/main/STANDARDS.md):

- MCP SDK ^1.25.1
- ES2022 target, strict TypeScript
- Vitest for testing (≥50% coverage)
- ESLint 9 flat config + Prettier
- Release-please for versioning

## Commit Message Format

Use conventional commits for release-please:
- `feat:` → minor version bump
- `fix:` → patch version bump
- `feat!:` or `BREAKING CHANGE:` → major version bump
- `chore:`, `docs:` → no version bump
